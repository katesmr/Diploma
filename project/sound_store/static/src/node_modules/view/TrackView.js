var inherit = require("../utils/inherit");
var Factory = require("./Factory");
var BaseView = require("./BaseView");

module.exports = TrackView;

function TrackView(bottomContainer){
    BaseView.call(this, "track-view");

    this.waveContainer = $("<div id='waveform'></div>");
    this.waveform = null;

    this._build();
    this.appendToBlock(bottomContainer);
}

inherit(TrackView, BaseView);

TrackView.prototype._build = function(){
    this._container.append(this.waveContainer);
};

TrackView.prototype.createWaveForm = function(blob){
    this.waveform = WaveSurfer.create({
        container: "#waveform",
        waveColor: 'violet',
        progressColor: 'purple'
    });
    this.waveform.loadBlob(blob);
    var self = this;
    this.waveform.on('ready', function () {
        self.waveform.play();
    });
};
