var inherit = require("../utils/inherit");
var Factory = require("./Factory");
var BaseView = require("./BaseView");
var eventListener = require("../model/eventListener");

module.exports = TrackToolModal;

function TrackToolModal(){
    BaseView.call(this, "ui modal track-tool");
    this.label = $("<h5>Choose instrument to create sound</h5>");
    this.synthButton = Factory.createButton("", "synth");
    this.oscillatorButton = Factory.createButton("", "oscillator");
    this.noiseButton = Factory.createButton("", "noise");

    this._build();
}

inherit(TrackToolModal, BaseView);

TrackToolModal.prototype._build = function(){
    var container = this.getContainer();
    this.synthButton.on("click", function(event){
        eventListener.notify(eventListener.SHOW_SYNTH_TOOL_FORM);
    });

    this.oscillatorButton.on("click", function(event){
        eventListener.notify(eventListener.SHOW_OSCILLATOR_TOOL_FORM);
    });

    this.noiseButton.on("click", function(event){
        eventListener.notify(eventListener.SHOW_NOISE_TOOL_FORM);
    });

    eventListener.subscribe(eventListener.SHOW_TRACK_TOOL_FORM, this.show.bind(this));

    container.append(this.label);
    container.append(this.synthButton);
    container.append(this.oscillatorButton);
    container.append(this.noiseButton);
};

TrackToolModal.prototype.show = function(){
    this.getContainer().modal("show");
};

