var inherit = require("../utils/inherit");
var TabSegment = require("./TabSegment");
var Factory = require("./Factory");
var commonEventNames = require("../core/commonEventNames");
var windowsTransport = require("./windowsTransport");

module.exports = SettingView;

function SettingView(track){
    TabSegment.call(this, "setting-view");

    this.track = null;
    this.oscillatorData = null;
    this.envelopeData = null;

    this.frequencyRange = Factory.rangeElement("frequency-range", 0, 1000, function(value){
        // setFrequencyValue apply with PLAY button !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    });

    this.setTrack(track);

    this._build();
    this.show();
}

inherit(SettingView, TabSegment);

SettingView.prototype._build = function(){
    var self = this;
    var container = this.getContainer();

    container.append(this.frequencyRange);
};

SettingView.prototype.setTrack = function(track){
    if(track){
        console.log(track);
        this.track = track;
        this.oscillatorData = this.track.trackObject.oscillator;
        this.envelopeData = this.track.trackObject.envelope;
        // set starting values from model:
        console.log(this.track.trackObject.frequency.value);
        Factory.setBeginValueToRangeElement(this.frequencyRange, this.track.trackObject.frequency.value);
    }
};

SettingView.prototype.setFrequencyValue = function(value){
    this.track.trackObject.oscillator.frequency = value;
};

