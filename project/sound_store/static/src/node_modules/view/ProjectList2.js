var inherit = require("../utils/inherit");
var BaseView = require("./BaseView");
var Factory = require("./Factory");
var RequestManager = require("../utils/RequestManager");
var eventListener = require("../model/eventListener");

module.exports = ProjectList;

function ProjectList(projectModel){
    BaseView.call(this, "project-list");

    this.projectModel = projectModel;

    this._build();
}

inherit(ProjectList, BaseView);

ProjectList.prototype._build = function(){
    // ... build your elements ...
    this.hide();

    eventListener.subscribe("PROJECT_MODEL_UPDATED", this._updateProjectListElement.bind(this));
};

ProjectList.prototype._updateProjectListElement = function(projectModel){
    var container = this.getContainer();

    // projectModel and this.projectModel are same, actually...
    this.projectList = Factory.createGridData(projectModel.data, null);

    // Clear (possibly) old project list:
    container.empty();

    // Add new one:
    container.append(this.projectList);
};
