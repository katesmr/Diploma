var inherit = require("../utils/inherit");
var Factory = require("./Factory");
var BaseView = require("./BaseView");
var UserModal = require("./UserModal");

module.exports = UserInfoBar;

function UserInfoBar(){
    BaseView.call(this, "user-info-bar");

    this.userName = null;
    this.joinButton = Factory.createButton("join");

    this._build();
}

inherit(UserInfoBar, BaseView);

UserInfoBar.prototype._build = function(){
    var container = this.getContainer();

    this.joinButton.on("click", function(){
        var userModal = new UserModal();
        userModal.show();
    });

    container.append(this.userName);
    container.append(this.joinButton);

    // eventListener.subscribe("ON_SHOW_PROJECT_LIST", this._fetchProjectList.bind(this));
};

UserInfoBar.prototype.setUserName = function(userName){
    if(userName instanceof Error){
        this.userName = $("<p>anonym</p>");
    } else{
        this.userName = $("<p>" + userName + "</p>");
    }
    this.getContainer().append(this.userName);
};