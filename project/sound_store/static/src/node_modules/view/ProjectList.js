var inherit = require("../utils/inherit");
var BaseView = require("./BaseView");
var Factory = require("./Factory");
var RequestManager = require("../RequestManager");
var eventListener = require("../model/eventListener");

module.exports = ProjectList;

function ProjectList(){
    BaseView.call(this, "project-list");

    this.projectList = null;

    this._build();
    this.hide();
}

inherit(ProjectList, BaseView);

ProjectList.prototype._build = function(){
    //eventListener.subscribe("ON_SHOW_PROJECT_LIST", this._fetchProjectList.bind(this));

    this.getContainer().append(this.projectList);

    // eventListener.subscribe("ON_SHOW_PROJECT_LIST", this._fetchProjectList.bind(this));
};

ProjectList.prototype._fetchProjectList = function(){
    // request to the server:
    var requestManager = new RequestManager();
    requestManager.getProjectList(this.showProjectList.bind(this))
    // requestManager.getProjectLIst(function(){ self.showProjectList() });
};

ProjectList.prototype.showProjectList = function(data){
    this.projectList = Factory.createGridData(data);
    this.getContainer().append(this.projectList);
};
