var ListController = require("./ListController");
var inherit = require("../utils/inherit");
var RequestManager = require("../utils/RequestManager");

module.exports = ProjectListController;

function ProjectListController(observer){
    ListController.call(this, observer);
}

inherit(ProjectListController, ListController);

ProjectListController.prototype.fetchData = function(){
    RequestManager.getProjectList(this._fetchDataHandler.bind(this));
};

ProjectListController.prototype.add = function(data){
    RequestManager.createProject("unknown", data, this._addHandler.bind(this));
};

ProjectListController.prototype.remove = function(name){
    console.log("-" + name);
    var i;
    var model = this.model;
    for (i = 0; i < model.size(); ++i){
        console.log(model.at(i));
        if (model.at(i) === name){
            RequestManager.deleteProject(name, this._removeHandler.bind(this));
            break;
        }
    }
};
