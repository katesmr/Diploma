var TrackManager = require("../utils/TrackManager");
var BaseTrackModel = require("./BaseTrackModel");
var ProjectModel = require("./ProjectModel");

module.exports = AudioPlayer;

function AudioPlayer(model){
    this.model = null;
    this.player = [];

    this.setModel(model);
}

AudioPlayer.prototype.setModel = function(model){
    console.log("model");
    console.log(model);
    if(model){
        this.model = model;
        if(this.model instanceof ProjectModel){
            // merge before play
            this._fullPlayerWithProject();
        } else if(this.model instanceof BaseTrackModel){
            this.player = this.model.playObjects;
        }
    }
};

AudioPlayer.prototype.play = function(){
    var i;
    for(i = 0; i < this.player.length; ++i){
        this.player[i].play();
    }
};

AudioPlayer.prototype._fullPlayerWithProject = function(){

};

AudioPlayer.prototype._fullPlayerWithTrack = function(){

};

AudioPlayer.prototype.pause = function(){};

AudioPlayer.prototype.stop = function(){};

/*AudioPlayer.prototype.save = function(fileName){
    var resultAudioBuffer;
    if(this.trackList.length === 1){
        resultAudioBuffer = this.trackList[0];
    } else if(this.trackList.length > 1){
        resultAudioBuffer = TrackManager.mergeTracks(this.trackList);
    }
    TrackManager.save(resultAudioBuffer, fileName);
    // call request of saving Project !!!!
};

AudioPlayer.prototype.export = function(){
    // save Sound
};

function _trackDataToTrack(audioPlayerObject){
    var i;
    var trackData = audioPlayerObject.model.trackDataList;
    for(i=0; i < trackData.length; ++i){

    }
}*/
